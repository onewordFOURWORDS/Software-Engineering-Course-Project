
----- setup ------

# pip installs

pip install flask
pip install python-dotenv
pip install flask-wtf
pip install flask-sqlalchemy
pip install flask-migrate
pip install flask-login
pip install email-validator


#start python and verify package

python3
import flask

----- end setup -------




------ testing and upkeep -------

CMD prompt:

#navigate to repo
#activate environment

cd C:\Users\User\...
450venv\Scripts\activate

# run flask to start web page host
flask run
 
exit() 

# run flask shell for more db options
flask shell

exit()


----------- python db interaction ------------------

# database updating after db changes (CMD)
flask db migrate -m "dev comment"
flask db upgrade


# enter flask shell, auto loads db elements (CMD) 
flask shell


# adding data (in shell)
u = User(username='susan', email='susan@example.com')
db.session.add(u)
db.session.commit()

#if error (in shell)
db.sesion.rollback()


# db testing (python3) if not in flask shell
from app import db
from app.models import User, Team, League



# various shell commands and expected results
>>> users = User.query.all()
>>> users
[<User john>, <User susan>]
>>> for u in users:
...     print(u.id, u.username)
...
1 john
2 susan

>>> u = User.query.get(1)
>>> u
<User john>

>>> # get all teams in a league
>>> u = League.query.get(1)
>>> u
<League 1>
>>> teams = u.teams.all()
>>> teams
[<Post my first post!>]

>>> # same, but with a user that has no posts
>>> u = User.query.get(2)
>>> u
<User susan>
>>> u.posts.all()
[]

>>> # print post author and body for all posts
>>> posts = Post.query.all()
>>> for p in posts:
...     print(p.id, p.author.username, p.body)
...
1 john my first post!

# get all users in reverse alphabetical order
>>> User.query.order_by(User.username.desc()).all()
[<User susan>, <User john>]

-------------- end db interaction ----------------


--------------- end testing and upkeep ----------------------



